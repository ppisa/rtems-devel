---
 c/src/lib/libbsp/arm/csb336/startup/bspstart.c |    2 ++
 1 file changed, 2 insertions(+)

Index: rtems/c/src/lib/libbsp/arm/csb336/startup/bspstart.c
===================================================================
--- rtems.orig/c/src/lib/libbsp/arm/csb336/startup/bspstart.c	2009-11-29 01:10:27.024557077 +0100
+++ rtems/c/src/lib/libbsp/arm/csb336/startup/bspstart.c	2009-11-29 01:11:06.963557071 +0100
@@ -76,6 +76,7 @@
 void mmu_set_cpu_async_mode(void);
 void bsp_start_default( void )
 {
+#ifdef CONFIG_MC9328MX_ASYNCMCLK
     int i;
 
     /* Set the MCU prescaler to divide by 1 */
@@ -91,6 +92,7 @@
 
     /* Set the CPU to asynchrous clock mode, so it uses its fastest clock */
     mmu_set_cpu_async_mode();
+#endif /*CONFIG_MC9328MX_ASYNCMCLK*/
 
     /* disable interrupts */
     MC9328MXL_AITC_INTENABLEL = 0;
